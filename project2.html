<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/project2.css">
  <title>Valentine's Proposal</title>
</head>
<body>
  <div class="container">
    <div class="Mainprompt">
      <img class="image" src="images/cute.gif" alt="Cute GIF">
      
      <div class="text">
        <h1 class="hh" id="name">–ü—Ä–∏–≤—ñ—Ç, –∫—Ä–∞—Å—É–Ω–µ!</h1>
        <p class="pp" id="question">–¢–∏ –±—É–¥–µ—à –º–æ—î—é –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ—é?</p>
      </div>

      <div class="buttons">
        <!-- –í–∏–¥–∞–ª—è—î–º–æ onclick –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù—ñ" -->
        <button class="button no" id="no-button">–ù—ñ</button>
        <!-- –ö–Ω–æ–ø–∫–∞ "–¢–∞–∫" –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –∑ onclick -->
        <button class="button yes" onclick="showMessage('Yes')" id="yesButton">–¢–∞–∫</button>
      </div>
    </div>
  </div>

  <script>
    // –ì–ª–æ–±–∞–ª—å–Ω–∞ –∑–º—ñ–Ω–Ω–∞ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∞—É–¥—ñ–æ
    let currentAudio = null;
    
    // –õ—ñ—á–∏–ª—å–Ω–∏–∫ –Ω–∞–≤–µ–¥–µ–Ω–Ω—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù—ñ"
    let hoverCount = 0;

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—É–¥—ñ–æ –∑ –∑—É–ø–∏–Ω–∫–æ—é –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ
    function playAudio(src) {
      if (currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
      }
      currentAudio = new Audio(src);
      currentAudio.play().catch(error => console.error("–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—É–¥—ñ–æ:", error));
    }

    // –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤–∏–±–æ—Ä—É
    function showMessage(response) {
      if (response === "No") {
        const noButton = document.getElementById("no-button");
        const container = document.querySelector(".container");
        const containerWidth = container.offsetWidth - noButton.offsetWidth;
        const containerHeight = container.offsetHeight - noButton.offsetHeight;
  
        noButton.style.position = "absolute";
        document.getElementsByClassName("image")[0].src = "images/gun.gif";
  
        const randomX = Math.max(0, Math.floor(Math.random() * containerWidth));
        const randomY = Math.max(0, Math.floor(Math.random() * containerHeight));
  
        noButton.style.left = randomX + "px";
        noButton.style.top  = randomY + "px";
  
        document.getElementById("question").textContent = "–ê–ª—å–æ, —Ç–∏ —â–æ —Ç–∞–º –∑–∞–¥—É–º–∞–ª–∞?";
        document.getElementById("name").style.display = "none";
      }
  
      if (response === "Yes") {
        // –ü–µ—Ä–µ–¥ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è–º –Ω–æ–≤–æ—ó –ø—ñ—Å–Ω—ñ –∑—É–ø–∏–Ω—è—î–º–æ –ø–æ—Ç–æ—á–Ω—É
        if (currentAudio) {
          currentAudio.pause();
          currentAudio.currentTime = 0;
        }
  
        // –í–∏–¥–∞–ª—è—î–º–æ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
        document.getElementById("name").remove();
        document.getElementById("no-button").remove();
  
        const yesMessage = document.getElementById("question");
        // –û–±–≥–æ—Ä—Ç–∞—î–º–æ —Ç–µ–∫—Å—Ç —É <span> —ñ–∑ –∫–ª–∞—Å–æ–º special-text –¥–ª—è –æ–∫—Ä–µ–º–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
        yesMessage.innerHTML = '<span class="special-text">–¢–∏ –º–æ—è Bubu üòò</span>';
        yesMessage.style.display = "block";
        yesMessage.style.fontStyle = "normal";
        document.getElementsByClassName("image")[0].src = "images/kiss.gif";
  
        document.getElementById("yesButton").remove();
  
        // –í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω—à–æ—ó –ø—ñ—Å–Ω—ñ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–¢–∞–∫"
        playAudio('../music/joke.mp3'); // –ó–∞–º—ñ–Ω—ñ—Ç—å —à–ª—è—Ö –Ω–∞ —Ñ–∞–∫—Ç–∏—á–Ω–∏–π
  
        // –ß–µ—Ä–µ–∑ 15 —Å–µ–∫—É–Ω–¥ —Å—Ç–≤–æ—Ä—é—î–º–æ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–¥–æ–≤–∂–∏–º–æ?"
        setTimeout(function() {
          const continueButton = document.createElement("button");
          continueButton.textContent = "–ü—Ä–æ–¥–æ–≤–∂–∏–º–æ?";
          continueButton.classList.add("button");
          continueButton.id = "continueButton";
            
          continueButton.addEventListener("click", function() {
            window.location.href = "main1.html"; // –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω—É –∞–¥—Ä–µ—Å—É
          });
            
          document.querySelector(".buttons").appendChild(continueButton);
        }, 15000);
      }
    }
  
    const noButton = document.getElementById('no-button');
  
    // –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó pointerdown –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –±–µ–∑ –∑–º—ñ–Ω
    noButton.addEventListener('pointerdown', function(event) {
      event.preventDefault(); 
      showMessage('No');
    });
  
    // –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó mouseenter ‚Äì –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞–≤–µ–¥–µ–Ω–Ω—å —Ç–∞ –ø—Ä–∏ –¥—Ä—É–≥–æ–º—É –∑–∞–ø—É—Å–∫–∞—î–º–æ –º—É–∑–∏–∫—É
    noButton.addEventListener('mouseenter', function() {
      hoverCount++;
      if (hoverCount === 1) {
        playAudio('../music/sad.mp3'); // –ó–∞–º—ñ–Ω—ñ—Ç—å —à–ª—è—Ö –Ω–∞ —Ñ–∞–∫—Ç–∏—á–Ω–∏–π
      }
      showMessage('No');
    });
  </script>
</body>
</html>
